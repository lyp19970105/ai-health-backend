# 代码文档与注释规范化

## 1. 目标

当前项目虽然功能完备，但代码内部的注释和文档尚不完善，可能导致新成员上手困难、长期维护成本增加。

本次重构的核心目标是：**为项目建立一套专业、高效、易于维护的注释和文档体系**。我们不追求为每一行代码都添加注释，而是要让注释真正服务于“**解释代码自身无法表达的意图（Why）**”，并为所有公开的 API 提供清晰的“**使用说明（What & How to use）**”。

## 2. 核心原则

1.  **代码即注释 (Code as Documentation)**：我们优先倡导通过编写清晰、自解释的代码来降低理解成本。良好的命名（类、方法、变量）是最好的文档。

2.  **注释解释“为什么”，而非“怎么做”**：
    -   **反例**: `i++; // i自增1` (这是无效注释，代码已经说明了“怎么做”)
    -   **正例**: `i++; // 跳过管理员账号，因为管理员不参与积分计算` (这是有效注释，解释了“为什么”要这么做)

3.  **公开 API 必须有 JavaDoc 文档**：所有对外提供服务或被其他模块调用的 `public` 类和 `public` 方法，都必须有标准的 JavaDoc 注释。这相当于为代码提供一份“使用说明书”。

## 3. 实施步骤

我们将分层、分类地对代码进行注释完善工作。

1.  **公开类和接口 (Class-Level)**：
    -   **做什么**：在每个类的顶部添加 JavaDoc。
    -   **怎么做**：说明该类的**核心职责和作用**。例如，`/** 用户认证服务，负责处理用户注册和登录的核心业务逻辑 */`。

2.  **公开方法 (Public Methods)**：
    -   **做什么**：在每个 `public` 方法上添加 JavaDoc。
    -   **怎么做**：
        -   `@param`：清晰地描述每个参数的含义和用途。
        -   `@return`：描述返回值的含义。
        -   `@throws`：声明可能抛出的业务异常 (`BusinessException`) 及其原因。
        -   **首句总结**：用一句话清晰概括该方法的功能。

3.  **字段 (Fields)**：
    -   **DTO / Entity / VO**：对于数据传输对象，如果字段名本身已足够清晰（如 `username`），则**无需**添加注释。仅为那些可能产生歧义或包含特殊约定的字段（如 `status` 字段，`0`代表正常，`1`代表禁用）添加注释。
    -   **常量**：所有 `public static final` 常量都必须有注释，说明其用途。

4.  **内部逻辑 (Implementation-Level)**：
    -   在方法内部，只对以下几种情况添加行内注释 (`// ...`)：
        -   **复杂的业务逻辑**：用几句话解释这段逻辑的业务背景或目的。
        -   **非常规的实现**：如果某段代码的实现方式比较特殊（例如，为了性能优化、规避某个第三方库的 bug），需要注释说明原因。
        -   **魔法值 (Magic Numbers)**：解释某个硬编码的数字或字符串的含义。
        -   **TODO / FIXME**：标记待办事项或需要修复的问题。

## 4. 预期效果

重构完成后，任何开发者在阅读代码时：
-   看到一个类，能通过类注释立刻了解它的定位和职责。
-   调用一个 public 方法，能通过 IDE 的提示（JavaDoc）清晰地知道如何使用它，而无需阅读其内部实现。
-   阅读方法内部实现时，能通过关键注释快速理解其中的复杂业务逻辑和特殊处理，大大提升代码的可读性和可维护性。

这将使项目代码达到一个专业软件的文档化水平。